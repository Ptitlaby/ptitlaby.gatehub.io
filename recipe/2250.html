<html>
<title>Recipe: Bone Arrow</title>

        <head>
            <link href="../css/pmfun.css" rel="stylesheet" type="text/css" />
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        </head>
        

            <div class="searchbar">
                <form class="example" action="../search.html">
                  <input type="text" id="searchTxt" placeholder="Search.." name="search">
                  <button id="searchBtn"><i class="fa fa-search"></i></button>
                </form>
            </div>
        
<br><br><br><br>

            <div class="content">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tbody><tr>
                <td width="17"><img src="../img/etc/tab_1.gif" width="17" height="21"></td>
                <td background="../img/etc/tab_1_fon.gif" align="center"><img src="../img/etc/tab_ornament_top.gif" width="445" height="21"></td>
                <td width="17"><img src="../img/etc/tab_2.gif" width="17" height="21"></td>
              </tr>
              <tr>
                <td background="../img/etc/tab_left_fon.gif"></td>
        

            <td align="center" valign="top" bgcolor="#1E4863">
            <img src="../img/etc/blank.gif" height="8"><br>
            <b class="txtbig"><a href='../item/2250.html'>Recipe</a>:
            <a href='../item/1341.html'>Bone Arrow</a> (100%)</b><br><img src="../img/etc/blank.gif" height="8"><br>
            <table cellspacing='0' cellpadding='0' border='0' width='100%' class='txt'>
<tbody>
<tr>
<td>
            
<ul class='1341'>
	<li class='1864'><img src='../img/icons/etc_branch_gold_i00.png' style='position:relative; top:10px;' class='img_border'> <text class='item_count'>1</text>x <a href='../item/1864.html'>Stem</a></li>
	<li class='1881'><img src='../img/icons/etc_powder_white_i00.png' style='position:relative; top:10px;' class='img_border'> <text class='item_count'>1</text>x <a href='../item/1881.html'>Coarse Bone Powder</a> (<a href='../recipe/1881.html'>recipe</a>) <img src='../img/etc/expand.png' id='1881' height='12' style='cursor:pointer; position:relative; top:3px;' onclick='myFunction(this)'></li>
<ul class='1881' style = 'display:none'>
	<li class='1872'><img src='../img/icons/etc_piece_bone_white_i00.png' style='position:relative; top:10px;' class='img_border'> <text class='item_count'>10</text>x <a href='../item/1872.html'>Animal Bone</a></li>
</ul></details></ul>
</td>
<td valign='top'><h3>Totals:</h3>
<ul id='totals'>
	<li style = '' id='total_1864' ><img src='../img/icons/etc_branch_gold_i00.png' style='position:relative; top:10px;' class='img_border'><text class='item_count'>1</text>x <a href='../item/1864.html'>Stem</a>
	<li style = '' id='total_1881' ><img src='../img/icons/etc_powder_white_i00.png' style='position:relative; top:10px;' class='img_border'><text class='item_count'>1</text>x <a href='../item/1881.html'>Coarse Bone Powder</a>
	<li style='display:none' id='total_1872' ><img src='../img/icons/etc_piece_bone_white_i00.png' style='position:relative; top:10px;' class='img_border'><text class='item_count'>0</text>x <a href='../item/1872.html'>Animal Bone</a>
</ul>


              </tbody></table>
            </td>
            <td background="../img/etc/tab_right_fon.gif"></td>
                  </tr>
                  <tr>
                    <td><img src="../img/etc/tab_3.gif" width="17" height="38"></td>
                    <td background="../img/etc/tab_bottom_fon.gif">
                      <table width="100%" border="0" cellspacing="0" cellpadding="0">
                        <tbody><tr>
                          <td><img src="../img/etc/tab_4.gif" width="24" height="38"></td>
                          <td align="right"><img src="../img/etc/tab_5.gif" width="24" height="38"></td>
                        </tr>
                      </tbody></table>
                    </td>
                    <td><img src="../img/etc/tab_6.gif" width="17" height="38"></td>
                  </tr>
                </tbody></table>
            </div>
        
</td>
</tr>
</tbody>
</table>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
  var totalUL = document.getElementById("totals");
  var totalLIs = totalUL.getElementsByTagName('li');
  var i, childNode, childNodes, findID, findLI, parentVal, childVal, totalVal, childID;

  function expand(elem, ul) {
    ul.style.display = "";
    elem.src = '../img/etc/collapse.png';

    parentVal = parseInt($(ul).parent().find("li."+elem.id+" text.item_count").text());

    findLI = document.getElementById("total_"+elem.id);
    totalVal = parseInt($(findLI).find('text.item_count').text());
    totalVal -= parentVal;
    if (totalVal === 0) {
      $(findLI).find('text.item_count').text(totalVal);
      findLI.style.display = "none";
    };

    childNodes = ul.childNodes;
    for(i = 0; i < childNodes.length; i++) {
      childNode = childNodes[i];
      if (childNodes[i].nodeName === "LI") {
        childID = childNode.getAttribute("class");
        childVal = parseInt($(childNode).find("text.item_count").text());
        findLI = document.getElementById("total_"+childID);

        totalVal = parseInt($(document.getElementById("total_"+childID)).find('text.item_count').text());
        totalVal += childVal;
        $(findLI).find('text.item_count').text(totalVal);
        if (findLI.style.display == "none") {
          findLI.style.display = "";
        }
      }
    }
  };

  function contract(elem, ul) {
    var i, childNode, childNodes, findID, findLI, parentVal, childVal, totalVal, childID;
    ul.style.display = "none";
    elem.src = '../img/etc/expand.png';

    parentVal = parseInt($(ul).parent().find("li."+elem.id+" text.item_count").text());

    findLI = document.getElementById("total_"+elem.id);
    totalVal = parseInt($(findLI).find('text.item_count').text());
    childNodes = ul.childNodes;

    for(i = 0; i < childNodes.length; i++) {
      childNode = childNodes[i];
      if (childNode.nodeName === "UL") {
        if (childNode.style.display === "") {
          childID = childNode.getAttribute("class");
          elem = document.getElementById(childID);
          ul = $(elem).parent().parent().find('ul.'+elem.id)[0];
          contract(elem, ul);
        }
      }
    }

    totalVal += parentVal;
    if (totalVal > 0) {
      findLI.style.display = "";
      $(findLI).find('text.item_count').text(totalVal);
    }


    for(i = 0; i < childNodes.length; i++) {
      childNode = childNodes[i];
      if (childNode.nodeName === "LI") {
        childID = childNode.getAttribute("class");
        childVal = parseInt($(childNode).find("text.item_count").text());
        findLI = document.getElementById("total_"+childID);

        totalVal = parseInt($(document.getElementById("total_"+childID)).find('text.item_count').text());
        totalVal -= childVal;
        $(findLI).find('text.item_count').text(totalVal);
        if (totalVal === 0) {
          findLI.style.display = "none";
        }
      }
    }
  };

  function myFunction(elem) {
    var ul = $(elem).parent().parent().find('ul.'+elem.id)[0];
    if (ul.style.display == "none") {
      // Expand
      expand(elem, ul);
    }
    else {
      // Contract
      contract(elem, ul)
    }
  };
</script>
            
</html>